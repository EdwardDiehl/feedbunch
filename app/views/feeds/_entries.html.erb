<% if entries.present? %>
    <% entries.all(order: 'published DESC').each do |entry| %>
        <li id="entry-<%= entry.id %>" class="accordion-group">

          <%# Link to open the entry summary %>
          <%
             if entry.read_by? user
                entry_class = "entry-read"
             else
                entry_class = "entry-unread"
             end
          %>

          <a data-toggle="collapse"
             data-target="#entry-<%= entry.id %>-summary"
             data-parent="#feed-entries"
             data-entry-id="<%= entry.id %>"
             class="<%= entry_class %>">

            <%= sanitize entry.title %>
            <span class="pull-right"><%= l entry.published, format: :short %></span>

          </a>

          <%# Entry summary, initially collapsed %>
          <div class="collapse"
               id="entry-<%= entry.id %>-summary"
               data-entry-summary-id="<%= entry.id %>"
               data-entry-state-update-path="<%= entries_update_path %>">
            <div class="entry-content">
              <p class="lead">
                <%= sanitize link_to(entry.title, entry.url, target: '_blank') %>
                <span class="pull-right">
              <%= sanitize link_to(content_tag(:i, '', class: 'icon-external-link'),
                                   entry.url,
                                   target: '_blank',
                                   title: t('.open_new_tab'),
                                   alt: t('.open_new_tab')) %>
            </span>
              </p>

              <p class="hidden"><%= sanitize entry.guid %></p>
              <%= sanitize entry.summary %>
            </div>
          </div>
        </li>
    <% end %>
<% end %>